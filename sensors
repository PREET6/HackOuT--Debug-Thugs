const express = require('express');
const router = express.Router();
const { 
  getSensors, 
  getSensor, 
  createSensor, 
  updateSensor, 
  addReading, 
  getReadings 
} = require('../controllers/sensorController');
const { authenticateToken } = require('../middleware/auth');

// All routes are protected
router.use(authenticateToken);

// Get all sensors
router.get('/', getSensors);

// Get a specific sensor
router.get('/:id', getSensor);

// Create a new sensor
router.post('/', createSensor);

// Update a sensor
router.put('/:id', updateSensor);

// Add sensor reading
router.post('/readings', addReading);

// Get sensor readings
router.get('/:id/readings', getReadings);

module.exports = router;